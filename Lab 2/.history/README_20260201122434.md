# GIáº¢I THÃCH CODE TCP/UDP

## Má»¤C Lá»¤C
- [Kiáº¿n thá»©c ná»n táº£ng](#kiáº¿n-thá»©c-ná»n-táº£ng)
- [BÃ i 1: Giáº£i phÆ°Æ¡ng trÃ¬nh báº­c 2](#bÃ i-1-giáº£i-phÆ°Æ¡ng-trÃ¬nh-báº­c-2)
- [BÃ i 2: NhÃ¢n hai ma tráº­n](#bÃ i-2-nhÃ¢n-hai-ma-tráº­n)
- [BÃ i 3: Thay tháº¿ chuá»—i trong file](#bÃ i-3-thay-tháº¿-chuá»—i-trong-file)
- [BÃ i 4: Xá»­ lÃ½ chuá»—i](#bÃ i-4-xá»­-lÃ½-chuá»—i)
- [BÃ i 5: Chat room](#bÃ i-5-chat-room)

---

## Kiáº¿n thá»©c ná»n táº£ng

### TCP (Transmission Control Protocol)

**Äáº·c Ä‘iá»ƒm:**
- **Connection-oriented**: Pháº£i thiáº¿t láº­p káº¿t ná»‘i trÆ°á»›c (3-way handshake)
- **Reliable**: Äáº£m báº£o dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch Ä‘áº§y Ä‘á»§, Ä‘Ãºng thá»© tá»±
- **Flow control**: Kiá»ƒm soÃ¡t tá»‘c Ä‘á»™ gá»­i/nháº­n Ä‘á»ƒ khÃ´ng bá»‹ trÃ n
- **Error checking**: Tá»± Ä‘á»™ng phÃ¡t hiá»‡n lá»—i vÃ  gá»­i láº¡i gÃ³i tin bá»‹ máº¥t
- **Overhead**: Tá»‘n tÃ i nguyÃªn hÆ¡n (header 20-60 bytes)

**CÆ¡ cháº¿ 3-way handshake:**
```
Client                    Server
  â”‚                         â”‚
  â”‚â”€â”€â”€â”€â”€â”€ SYN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  (Xin káº¿t ná»‘i)
  â”‚                         â”‚
  â”‚<â”€â”€â”€â”€â”€ SYN-ACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  (Äá»“ng Ã½ + xÃ¡c nháº­n)
  â”‚                         â”‚
  â”‚â”€â”€â”€â”€â”€â”€ ACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  (XÃ¡c nháº­n hoÃ n táº¥t)
  â”‚                         â”‚
  â””â”€â”€â”€ Káº¿t ná»‘i thÃ nh cÃ´ng â”€â”€â”˜
```

**Trong code cá»§a báº¡n:**
```javascript
// TCP Server - net.createServer()
const server = net.createServer((socket) => {
    // socket Ä‘áº¡i diá»‡n cho 1 káº¿t ná»‘i cá»‘ Ä‘á»‹nh
    socket.on('data', (data) => {
        // Nháº­n dá»¯ liá»‡u tá»« chÃ­nh káº¿t ná»‘i Ä‘Ã³
        socket.write(result);  // Gá»­i láº¡i cho chÃ­nh client Ä‘Ã³
    });
});

// TCP Client - client.connect()
client.connect(5000, '127.0.0.1', () => {
    // Pháº£i káº¿t ná»‘i trÆ°á»›c má»›i gá»­i Ä‘Æ°á»£c
    client.write('Hello');  // Gá»­i qua káº¿t ná»‘i Ä‘Ã£ thiáº¿t láº­p
});
```

### UDP (User Datagram Protocol)

**Äáº·c Ä‘iá»ƒm:**
- **Connectionless**: KhÃ´ng cáº§n thiáº¿t láº­p káº¿t ná»‘i, gá»­i trá»±c tiáº¿p
- **Unreliable**: KhÃ´ng Ä‘áº£m báº£o dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch (cÃ³ thá»ƒ máº¥t gÃ³i tin)
- **No ordering**: GÃ³i tin cÃ³ thá»ƒ Ä‘áº¿n khÃ´ng Ä‘Ãºng thá»© tá»± gá»­i
- **Fast**: Nhanh hÆ¡n TCP (khÃ´ng cÃ³ overhead káº¿t ná»‘i)
- **Overhead**: Nháº¹ hÆ¡n (header chá»‰ 8 bytes)

**CÆ¡ cháº¿ gá»­i nháº­n:**
```
Client                    Server
  â”‚                         â”‚
  â”‚â”€â”€â”€â”€ Data packet 1 â”€â”€â”€â”€â”€>â”‚  (cÃ³ thá»ƒ Ä‘áº¿n)
  â”‚â”€â”€â”€â”€ Data packet 2 â”€â”€â”€â”€â”€>â”‚  (cÃ³ thá»ƒ máº¥t)
  â”‚â”€â”€â”€â”€ Data packet 3 â”€â”€â”€â”€â”€>â”‚  (cÃ³ thá»ƒ Ä‘áº¿n trÆ°á»›c packet 1)
  â”‚                         â”‚
  â””â”€â”€â”€ KhÃ´ng cÃ³ xÃ¡c nháº­n â”€â”€â”€â”€â”˜
```

**Trong code cá»§a báº¡n:**
```javascript
// UDP Server - dgram.createSocket()
const server = dgram.createSocket('udp4');
server.on('message', (msg, rinfo) => {
    // rinfo chá»©a thÃ´ng tin client (address, port)
    // Pháº£i chá»‰ Ä‘á»‹nh rÃµ gá»­i cho ai
    server.send(result, rinfo.port, rinfo.address);
});

// UDP Client - gá»­i trá»±c tiáº¿p
const client = dgram.createSocket('udp4');
const msg = Buffer.from('Hello');
// KhÃ´ng cáº§n connect, gá»­i luÃ´n
client.send(msg, 5000, '127.0.0.1');
```

---

### So sÃ¡nh TCP vs UDP

| TiÃªu chÃ­ | TCP | UDP |
|----------|-----|-----|
| **Káº¿t ná»‘i** | Cáº§n thiáº¿t láº­p trÆ°á»›c | KhÃ´ng cáº§n |
| **Äá»™ tin cáº­y** | 100% Ä‘áº£m báº£o Ä‘áº¿n Ä‘Ã­ch | KhÃ´ng Ä‘áº£m báº£o |
| **Thá»© tá»±** | ÄÃºng thá»© tá»± gá»­i | CÃ³ thá»ƒ sai thá»© tá»± |
| **Tá»‘c Ä‘á»™** | Cháº­m hÆ¡n | Nhanh hÆ¡n |
| **TÃ i nguyÃªn** | Tá»‘n nhiá»u | Ãt |
| **PhÃ¡t hiá»‡n lá»—i** | CÃ³, tá»± Ä‘á»™ng gá»­i láº¡i | KhÃ´ng |
| **Module Node.js** | `net` | `dgram` |
| **Táº¡o server** | `net.createServer()` | `dgram.createSocket()` |
| **Gá»­i dá»¯ liá»‡u** | `socket.write(data)` | `socket.send(msg, port, address)` |
| **Nháº­n dá»¯ liá»‡u** | `socket.on('data')` | `socket.on('message')` |
| **Biáº¿t client** | Tá»± Ä‘á»™ng (qua socket) | Pháº£i láº¥y tá»« `rinfo` |

**Code trong bÃ i cá»§a báº¡n:**
```javascript
// TCP - Gá»­i vÃ  nháº­n Ä‘Æ¡n giáº£n
socket.write('Hello');           // Tá»± biáº¿t gá»­i cho ai
socket.on('data', (data) => {}); // Tá»± biáº¿t nháº­n tá»« ai

// UDP - Pháº£i chá»‰ rÃµ
socket.send(msg, 5000, '127.0.0.1');              // Pháº£i chá»‰ Ä‘á»‹nh port, address
socket.on('message', (msg, rinfo) => {            // rinfo chá»©a thÃ´ng tin ngÆ°á»i gá»­i
    console.log(`Tá»« ${rinfo.address}:${rinfo.port}`);
});
```

---

### Khi nÃ o dÃ¹ng TCP?

**DÃ¹ng TCP khi:**
- **Cáº§n Ä‘áº£m báº£o dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch Ä‘áº§y Ä‘á»§**
- **Thá»© tá»± tin nháº¯n quan trá»ng**
- **Cháº¥p nháº­n cháº­m hÆ¡n má»™t chÃºt Ä‘á»ƒ Ä‘á»•i láº¥y Ä‘á»™ tin cáº­y**

**VÃ­ dá»¥ thá»±c táº¿ tá»« bÃ i cá»§a báº¡n:**

**BÃ i 1 - Giáº£i phÆ°Æ¡ng trÃ¬nh:** DÃ¹ng TCP
- LÃ½ do: Pháº£i Ä‘áº£m báº£o káº¿t quáº£ Ä‘Ãºng 100% gá»­i vá» client
- Náº¿u máº¥t káº¿t quáº£ â†’ user khÃ´ng biáº¿t nghiá»‡m cá»§a phÆ°Æ¡ng trÃ¬nh

**BÃ i 2 - NhÃ¢n ma tráº­n:** DÃ¹ng TCP
- LÃ½ do: Ma tráº­n cÃ³ nhiá»u sá»‘, máº¥t 1 sá»‘ â†’ káº¿t quáº£ sai hoÃ n toÃ n
- Cáº§n Ä‘áº£m báº£o toÃ n bá»™ ma tráº­n gá»­i Ä‘á»§

**BÃ i 3 - Thay tháº¿ file:** DÃ¹ng TCP
- LÃ½ do: File text pháº£i Ä‘áº§y Ä‘á»§, máº¥t 1 dÃ²ng â†’ file bá»‹ há»ng
- Cáº§n Ä‘áº£m báº£o ná»™i dung file nguyÃªn váº¹n

**BÃ i 4 - Xá»­ lÃ½ chuá»—i:** DÃ¹ng TCP
- LÃ½ do: Lá»‡nh vÃ  tham sá»‘ pháº£i Ä‘áº§y Ä‘á»§
- Náº¿u máº¥t tham sá»‘ â†’ server xá»­ lÃ½ sai

**BÃ i 5 - Chat room:** DÃ¹ng TCP
- LÃ½ do: Tin nháº¯n pháº£i Ä‘áº¿n Ä‘áº§y Ä‘á»§, Ä‘Ãºng thá»© tá»±
- Náº¿u máº¥t tin â†’ cuá»™c trÃ² chuyá»‡n khÃ´ng hiá»ƒu Ä‘Æ°á»£c

**CÃ¡c á»©ng dá»¥ng khÃ¡c dÃ¹ng TCP:**
- Web browsing (HTTP/HTTPS)
- Email (SMTP, POP3, IMAP)
- File transfer (FTP, SFTP)
- Remote access (SSH, Telnet)
- Database connections

---

### Khi nÃ o dÃ¹ng UDP?

**DÃ¹ng UDP khi:**
- **Tá»‘c Ä‘á»™ quan trá»ng hÆ¡n Ä‘á»™ tin cáº­y**
- **Cháº¥p nháº­n máº¥t má»™t Ã­t dá»¯ liá»‡u**
- **Dá»¯ liá»‡u gá»­i thÆ°á»ng xuyÃªn, liÃªn tá»¥c**
- **Äá»™ trá»… (latency) pháº£i tháº¥p**

**VÃ­ dá»¥ thá»±c táº¿:**

**Video call (Zoom, Skype):**
- Máº¥t vÃ i frame video â†’ khÃ´ng sao, váº«n xem Ä‘Æ°á»£c
- Quan trá»ng lÃ  real-time, khÃ´ng bá»‹ giáº­t lag
- TCP cháº­m â†’ bá»‹ delay, khÃ´ng real-time

**Game online (PUBG, LOL, Valorant):**
- Vá»‹ trÃ­ nhÃ¢n váº­t cáº­p nháº­t liÃªn tá»¥c (60 láº§n/giÃ¢y)
- Máº¥t 1-2 gÃ³i tin â†’ khÃ´ng áº£nh hÆ°á»Ÿng lá»›n (gÃ³i tin tiáº¿p theo Ä‘Ã£ cáº­p nháº­t vá»‹ trÃ­ má»›i)
- TCP cháº­m â†’ bá»‹ lag, cháº¿t máº¥t

**Live streaming (YouTube Live, Twitch):**
- Stream video/audio liÃªn tá»¥c
- Máº¥t vÃ i khung hÃ¬nh â†’ ngÆ°á»i xem khÃ´ng nháº­n ra
- Quan trá»ng lÃ  mÆ°á»£t, khÃ´ng Ä‘á»©ng hÃ¬nh

**VoIP (gá»i Ä‘iá»‡n thoáº¡i qua máº¡ng):**
- Giá»ng nÃ³i real-time
- Máº¥t vÃ i mili giÃ¢y â†’ khÃ´ng áº£nh hÆ°á»Ÿng
- TCP cháº­m â†’ thoáº¡i bá»‹ delay, nÃ³i khÃ´ng ká»‹p

**DNS lookup:**
- Chá»‰ cáº§n há»i 1 láº§n: "google.com IP lÃ  gÃ¬?"
- Náº¿u khÃ´ng Ä‘Æ°á»£c â†’ há»i láº¡i, Ä‘Æ¡n giáº£n
- KhÃ´ng cáº§n thiáº¿t láº­p káº¿t ná»‘i phá»©c táº¡p nhÆ° TCP

**Sensor data (IoT):**
- Cáº£m biáº¿n gá»­i nhiá»‡t Ä‘á»™ má»—i giÃ¢y: 25Â°C, 25Â°C, 26Â°C...
- Máº¥t 1 giÃ¡ trá»‹ â†’ khÃ´ng sao, giÃ¡ trá»‹ tiáº¿p theo Ä‘Ã£ Ä‘áº¿n
- Quan trá»ng lÃ  nhanh, tá»‘n Ã­t pin

---

### CÃ¡c khÃ¡i niá»‡m JavaScript trong code

**1. Callback Function**
```javascript
// HÃ m Ä‘Æ°á»£c truyá»n nhÆ° tham sá»‘, sáº½ Ä‘Æ°á»£c gá»i sau
function input(name, cb) {
    rl.question('Nháº­p: ', (answer) => {
        cb(answer);  // Gá»i callback vá»›i káº¿t quáº£
    });
}
```

**2. Arrow Function**
```javascript
// CÃº phÃ¡p ngáº¯n gá»n
(param) => { return value }

// TÆ°Æ¡ng Ä‘Æ°Æ¡ng:
function(param) { return value }
```

**3. Destructuring**
```javascript
// Láº¥y giÃ¡ trá»‹ tá»« object
const { m1, m2 } = { m1: [[1,2]], m2: [[3,4]] };
// â†’ m1 = [[1,2]], m2 = [[3,4]]

// Láº¥y giÃ¡ trá»‹ tá»« array
const [a, b, c] = [1, 2, 3];
// â†’ a = 1, b = 2, c = 3
```

**4. Spread Operator (...)**
```javascript
function processCommand(cmd, text, ...params) {
    // params lÃ  máº£ng chá»©a táº¥t cáº£ tham sá»‘ cÃ²n láº¡i
}
processCommand('DELETE', 'hello', 0, 5);  
// â†’ cmd = 'DELETE', text = 'hello', params = [0, 5]
```

**5. JSON - Chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u**
```javascript
// Object â†’ String (Ä‘á»ƒ gá»­i qua máº¡ng)
const data = { m1: [[1,2]], m2: [[3,4]] };
const str = JSON.stringify(data);  
// â†’ '{"m1":[[1,2]],"m2":[[3,4]]}'

// String â†’ Object (sau khi nháº­n)
const obj = JSON.parse(str);  
// â†’ { m1: [[1,2]], m2: [[3,4]] }
```

**6. Buffer - Dá»¯ liá»‡u nhá»‹ phÃ¢n**
```javascript
// Socket nháº­n/gá»­i dá»¯ liá»‡u dáº¡ng Buffer
socket.on('data', (data) => {
    const str = data.toString();  // Buffer â†’ String
});

const msg = Buffer.from('Hello');  // String â†’ Buffer
socket.write(msg);
```

---

## BÃ i 1: Giáº£i phÆ°Æ¡ng trÃ¬nh báº­c 2

### File: `1_tcp_server.js`

```javascript
// DÃ²ng 1: Import module 'net' Ä‘á»ƒ lÃ m viá»‡c vá»›i TCP socket
const net = require('net');

// DÃ²ng 3-14: HÃ m giáº£i phÆ°Æ¡ng trÃ¬nh axÂ² + bx + c = 0
function solve(a, b, c) {
    // DÃ²ng 4: TÃ­nh delta theo cÃ´ng thá»©c Î” = bÂ² - 4ac
    const delta = b * b - 4 * a * c;
    
    // DÃ²ng 5: Náº¿u delta < 0 â†’ phÆ°Æ¡ng trÃ¬nh vÃ´ nghiá»‡m (khÃ´ng cÃ³ nghiá»‡m thá»±c)
    if (delta < 0) return 'VÃ´ nghiá»‡m';
    
    // DÃ²ng 6-9: Náº¿u delta = 0 â†’ nghiá»‡m kÃ©p
    if (delta === 0) {
        // DÃ²ng 7: TÃ­nh nghiá»‡m kÃ©p x = -b / (2a)
        const x = -b / (2 * a);
        // DÃ²ng 8: Tráº£ vá» káº¿t quáº£, toFixed(2) lÃ m trÃ²n 2 chá»¯ sá»‘ tháº­p phÃ¢n
        return `Nghiá»‡m kÃ©p: x = ${x.toFixed(2)}`;
    }
    
    // DÃ²ng 10-11: Náº¿u delta > 0 â†’ 2 nghiá»‡m phÃ¢n biá»‡t
    // Math.sqrt(delta) tÃ­nh cÄƒn báº­c 2 cá»§a delta
    const x1 = (-b + Math.sqrt(delta)) / (2 * a);  // Nghiá»‡m 1
    const x2 = (-b - Math.sqrt(delta)) / (2 * a);  // Nghiá»‡m 2
    // DÃ²ng 12: Tráº£ vá» cáº£ 2 nghiá»‡m
    return `x1 = ${x1.toFixed(2)}, x2 = ${x2.toFixed(2)}`;
}

// DÃ²ng 16: Táº¡o TCP server
// net.createServer() nháº­n callback Ä‘Æ°á»£c gá»i má»—i khi cÃ³ client káº¿t ná»‘i
// Tham sá»‘ 'socket' lÃ  káº¿t ná»‘i vá»›i client Ä‘Ã³
const server = net.createServer((socket) => {
    // DÃ²ng 17: In thÃ´ng bÃ¡o khi cÃ³ client káº¿t ná»‘i
    console.log('Client káº¿t ná»‘i!');
    
    // DÃ²ng 18: Láº¯ng nghe sá»± kiá»‡n 'data' - khi nháº­n dá»¯ liá»‡u tá»« client
    socket.on('data', (data) => {
        // DÃ²ng 19: Chuyá»ƒn Buffer thÃ nh String vÃ  xÃ³a khoáº£ng tráº¯ng Ä‘áº§u/cuá»‘i
        const input = data.toString().trim();
        
        // DÃ²ng 20: TÃ¡ch chuá»—i theo dáº¥u cÃ¡ch, chuyá»ƒn má»—i pháº§n tá»­ thÃ nh sá»‘
        // VÃ­ dá»¥: "1 -5 6" â†’ ["1", "-5", "6"] â†’ [1, -5, 6]
        const nums = input.split(' ').map(Number);
        
        // DÃ²ng 21: Destructuring - láº¥y 3 pháº§n tá»­ Ä‘áº§u lÃ m a, b, c
        const [a, b, c] = nums;
        
        // DÃ²ng 23: In ra phÆ°Æ¡ng trÃ¬nh nháº­n Ä‘Æ°á»£c
        console.log(`Nháº­n: ${a}xÂ² + ${b}x + ${c} = 0`);
        
        // DÃ²ng 24: Gá»i hÃ m solve Ä‘á»ƒ giáº£i phÆ°Æ¡ng trÃ¬nh
        const result = solve(a, b, c);
        
        // DÃ²ng 25: Gá»­i káº¿t quáº£ vá» client qua socket
        socket.write(result);
        
        // DÃ²ng 26: In káº¿t quáº£ Ä‘Ã£ gá»­i
        console.log(`Gá»­i: ${result}\n`);
    });
});

// DÃ²ng 30: Cho server láº¯ng nghe trÃªn cá»•ng 5000
// Callback Ä‘Æ°á»£c gá»i khi server sáºµn sÃ ng
server.listen(5000, () => {
    console.log('Server cháº¡y táº¡i cá»•ng 5000\n');
});
```

### ğŸ“ File: `1_tcp_client.js`

```javascript
// DÃ²ng 1-2: Import cÃ¡c module cáº§n thiáº¿t
const net = require('net');              // Module TCP socket
const readline = require('readline');    // Module Ä‘á»c input tá»« console

// DÃ²ng 3: Táº¡o má»™t socket client Ä‘á»ƒ káº¿t ná»‘i Ä‘áº¿n server
const client = new net.Socket();

// DÃ²ng 5-8: Táº¡o interface Ä‘á»ƒ Ä‘á»c input tá»« bÃ n phÃ­m
const rl = readline.createInterface({
    input: process.stdin,    // Äá»c tá»« bÃ n phÃ­m
    output: process.stdout   // Xuáº¥t ra console
});

// DÃ²ng 10: Káº¿t ná»‘i Ä‘áº¿n server
// Tham sá»‘: (port, host, callback khi káº¿t ná»‘i thÃ nh cÃ´ng)
client.connect(5000, '127.0.0.1', () => {
    // DÃ²ng 11-12: In thÃ´ng bÃ¡o khi káº¿t ná»‘i thÃ nh cÃ´ng
    console.log('Káº¿t ná»‘i thÃ nh cÃ´ng!');
    console.log('Nháº­p 3 sá»‘ a b c (cÃ¡ch nhau bá»Ÿi dáº¥u cÃ¡ch)\n');
    
    // DÃ²ng 13: Gá»i hÃ m Ä‘á»ƒ báº¯t Ä‘áº§u nháº­p dá»¯ liá»‡u
    askInput();
});

// DÃ²ng 16-20: HÃ m há»i ngÆ°á»i dÃ¹ng nháº­p 3 sá»‘
function askInput() {
    // DÃ²ng 17: Hiá»ƒn thá»‹ prompt vÃ  Ä‘á»£i ngÆ°á»i dÃ¹ng nháº­p
    rl.question('Nháº­p a b c: ', (input) => {
        // DÃ²ng 18: Khi ngÆ°á»i dÃ¹ng nháº¥n Enter, gá»­i dá»¯ liá»‡u Ä‘áº¿n server
        client.write(input);
    });
}

// DÃ²ng 22-25: Láº¯ng nghe dá»¯ liá»‡u tá»« server
client.on('data', (data) => {
    // DÃ²ng 23: In káº¿t quáº£ nháº­n Ä‘Æ°á»£c tá»« server
    console.log(`â†’ ${data}\n`);
    
    // DÃ²ng 24: Há»i tiáº¿p Ä‘á»ƒ nháº­p bá»™ sá»‘ má»›i
    askInput();
});

// DÃ²ng 27-30: Xá»­ lÃ½ khi káº¿t ná»‘i bá»‹ Ä‘Ã³ng
client.on('close', () => {
    // DÃ²ng 28: In thÃ´ng bÃ¡o
    console.log('Ngáº¯t káº¿t ná»‘i');
    // DÃ²ng 29: ÄÃ³ng readline interface
    rl.close();
});
```

---

## BÃ i 2: NhÃ¢n hai ma tráº­n

### ğŸ“ File: `2_tcp_server.js`

```javascript
// DÃ²ng 1: Import module net
const net = require('net')

// DÃ²ng 3-13: HÃ m nhÃ¢n 2 ma tráº­n
// Tham sá»‘: a = ma tráº­n A[mÃ—n], b = ma tráº­n B[nÃ—p]
// Káº¿t quáº£: ma tráº­n C[mÃ—p]
function solve(a, b){
    // DÃ²ng 4: Khá»Ÿi táº¡o máº£ng káº¿t quáº£ rá»—ng
    const res = [];
    
    // DÃ²ng 5: VÃ²ng láº·p qua tá»«ng hÃ ng cá»§a ma tráº­n A
    for(let i=0; i<a.length; ++i){
        // DÃ²ng 6: Táº¡o hÃ ng thá»© i cá»§a káº¿t quáº£
        res[i] = [];
        
        // DÃ²ng 7: VÃ²ng láº·p qua tá»«ng cá»™t cá»§a ma tráº­n B
        for(let j=0; j<b[0].length; ++j){
            // DÃ²ng 8: Khá»Ÿi táº¡o pháº§n tá»­ res[i][j] = 0
            res[i][j] = 0;
            
            // DÃ²ng 9-10: TÃ­nh tá»•ng tÃ­ch
            // res[i][j] = a[i][0]*b[0][j] + a[i][1]*b[1][j] + ... + a[i][k]*b[k][j]
            for(let k=0; k<b.length; ++k)
                res[i][j] += a[i][k]*b[k][j];  // NhÃ¢n vÃ  cá»™ng dá»“n
        }
    }
    // DÃ²ng 12: Tráº£ vá» ma tráº­n káº¿t quáº£
    return res; 
}

// DÃ²ng 15: Táº¡o TCP server
const server = net.createServer((socket) => {
    // DÃ²ng 16: In thÃ´ng bÃ¡o khi client káº¿t ná»‘i
    console.log('Client connect');
    
    // DÃ²ng 17: Láº¯ng nghe dá»¯ liá»‡u tá»« client
    socket.on('data', (data) => {
        // DÃ²ng 18: Parse JSON thÃ nh object
        // Client gá»­i dáº¡ng: {"m1": [[1,2],[3,4]], "m2": [[5,6],[7,8]]}
        const {m1, m2} = JSON.parse(data);
        
        // DÃ²ng 19: Gá»i hÃ m nhÃ¢n ma tráº­n
        const ans = solve(m1, m2);
        
        // DÃ²ng 20: In káº¿t quáº£ ra console
        console.log('Ket qua', ans, '\n');
        
        // DÃ²ng 21: Chuyá»ƒn káº¿t quáº£ thÃ nh JSON string vÃ  gá»­i vá» client
        socket.write(JSON.stringify(ans));
        
        // DÃ²ng 22: In thÃ´ng bÃ¡o Ä‘Ã£ gá»­i
        console.log('Gui');
    });
});

// DÃ²ng 26: Láº¯ng nghe trÃªn cá»•ng 5000
server.listen(5000, () => {
    console.log('Serer chay ...')
});
```

### ğŸ“ File: `2_tcp_client.js`

```javascript
// DÃ²ng 1-2: Import module
const net = require('net');
const readline = require('readline');

// DÃ²ng 4: Táº¡o socket client
const client = new net.Socket();

// DÃ²ng 5: Táº¡o readline interface
const rl = readline.createInterface({ input: process.stdin, output: process.stdout });

// DÃ²ng 7-16: HÃ m hiá»ƒn thá»‹ ma tráº­n Ä‘áº¹p
function show(m, name) {
    // DÃ²ng 8: In tÃªn ma tráº­n
    console.log(`${name}:`);
    
    // DÃ²ng 9: VÃ²ng láº·p qua tá»«ng hÃ ng
    for(let i=0; i<m.length; i++){
        // DÃ²ng 10: Táº¡o chuá»—i cho 1 hÃ ng, báº¯t Ä‘áº§u báº±ng 2 dáº¥u cÃ¡ch
        let row = '  ';
        
        // DÃ²ng 11: VÃ²ng láº·p qua tá»«ng cá»™t
        for(let j=0; j<m[i].length; j++){
            // DÃ²ng 12: ThÃªm giÃ¡ trá»‹ vÃ o chuá»—i, cÃ¡ch nhau 2 khoáº£ng tráº¯ng
            row += m[i][j] + '  ';
        }
        // DÃ²ng 14: In chuá»—i hÃ ng ra console
        console.log(row);
    }
}

// DÃ²ng 17-31: HÃ m nháº­p ma tráº­n tá»« ngÆ°á»i dÃ¹ng
// Tham sá»‘: name = tÃªn ma tráº­n, cb = callback function
function input(name, cb){
    // DÃ²ng 18: Há»i kÃ­ch thÆ°á»›c ma tráº­n (sá»‘ hÃ ng r, sá»‘ cá»™t c)
    rl.question(`${name} (KÃ­ch thÆ°á»›c n, m): `, (size) => {
        // DÃ²ng 19: Parse thÃ nh 2 sá»‘
        const [r, c] = size.split(' ').map(Number);
        
        // DÃ²ng 20: Há»i nháº­p táº¥t cáº£ cÃ¡c sá»‘ (r*c sá»‘)
        rl.question(`Nháº­p ${r*c} sá»‘: `, (line) => {
            // DÃ²ng 21: TÃ¡ch chuá»—i thÃ nh máº£ng sá»‘
            const n = line.split(' ').map(Number);
            
            // DÃ²ng 22: Khá»Ÿi táº¡o ma tráº­n rá»—ng
            const m = [];
            
            // DÃ²ng 23: VÃ²ng láº·p táº¡o tá»«ng hÃ ng
            for(let i=0; i<r; i++){
                // DÃ²ng 24: Táº¡o hÃ ng thá»© i
                m[i] = [];
                
                // DÃ²ng 25: VÃ²ng láº·p táº¡o tá»«ng cá»™t
                for(let j=0; j<c; j++){
                    // DÃ²ng 26: Láº¥y sá»‘ tá»« máº£ng n theo cÃ´ng thá»©c: vá»‹ trÃ­ = i*c + j
                    // VÃ­ dá»¥ r=2, c=2: [1,2,3,4] â†’ [[1,2],[3,4]]
                    m[i][j] = n[i*c + j];
                }
            }
            // DÃ²ng 29: Gá»i callback vá»›i ma tráº­n Ä‘Ã£ táº¡o
            cb(m);
        });
    });
}

// DÃ²ng 33-36: Káº¿t ná»‘i Ä‘áº¿n server
client.connect(5000, '127.0.0.1', () => {
    // DÃ²ng 34: In thÃ´ng bÃ¡o káº¿t ná»‘i OK
    console.log('OK\n');
    // DÃ²ng 35: Báº¯t Ä‘áº§u nháº­p liá»‡u
    ask();
});

// DÃ²ng 38-44: HÃ m Ä‘iá»u khiá»ƒn luá»“ng nháº­p liá»‡u
function ask(){
    // DÃ²ng 39: Nháº­p ma tráº­n A
    input('Ma tráº­n A : ', (m1) => {
        // DÃ²ng 40: Sau khi nháº­p xong A, nháº­p ma tráº­n B
        input('Ma tráº­n B', (m2) => {
            // DÃ²ng 41: In thÃ´ng bÃ¡o
            console.log('\nGá»­i lÃªn server ...');
            
            // DÃ²ng 42: Gá»­i 2 ma tráº­n dáº¡ng JSON Ä‘áº¿n server
            client.write(JSON.stringify({ m1, m2 }));
        });
    });
}

// DÃ²ng 46-51: Nháº­n káº¿t quáº£ tá»« server
client.on('data', (data) => {
    // DÃ²ng 47: Parse JSON thÃ nh ma tráº­n vÃ  hiá»ƒn thá»‹
    show(JSON.parse(data), 'Káº¿t quáº£ ma tráº­n AÃ—B');
    
    // DÃ²ng 48: Há»i cÃ³ muá»‘n tiáº¿p tá»¥c khÃ´ng
    rl.question('\nTiáº¿p? (y/n): ', (a) => {
        // DÃ²ng 49: Náº¿u nháº­p 'y', tiáº¿p tá»¥c
        if (a === 'y') ask();
        // DÃ²ng 50: Náº¿u khÃ´ng, Ä‘Ã³ng káº¿t ná»‘i
        else { client.destroy(); rl.close(); }
    });
});
```

---

## BÃ i 3: Thay tháº¿ chuá»—i trong file

### ğŸ“ File: `3_tcp_server.js`

```javascript
// DÃ²ng 1: Import module net
const net = require('net');

// DÃ²ng 3-5: HÃ m thay tháº¿ táº¥t cáº£ s1 thÃ nh s2 trong content
function replaceAll(content, s1, s2) {
    // DÃ²ng 4: Split chuá»—i theo s1, rá»“i join láº¡i báº±ng s2
    // VÃ­ dá»¥: "Hello world Hello" vá»›i s1="Hello", s2="Hi"
    // â†’ ["", " world ", ""] â†’ "Hi world Hi"
    return content.split(s1).join(s2);
}

// DÃ²ng 7: Táº¡o TCP server
const server = net.createServer((socket) => {
    // DÃ²ng 8: In thÃ´ng bÃ¡o
    console.log('Client káº¿t ná»‘i!\n');
    
    // DÃ²ng 10: Láº¯ng nghe dá»¯ liá»‡u tá»« client
    socket.on('data', (data) => {
        // DÃ²ng 11-12: Parse JSON Ä‘á»ƒ láº¥y file content vÃ  2 chuá»—i
        const request = JSON.parse(data.toString());
        const { fileContent, s1, s2 } = request;
        
        // DÃ²ng 14-15: In thÃ´ng tin nháº­n Ä‘Æ°á»£c
        console.log(`Nháº­n file (${fileContent.length} kÃ½ tá»±)`);
        console.log(`Thay tháº¿: "${s1}" â†’ "${s2}"`);
        
        // DÃ²ng 16: Gá»i hÃ m thay tháº¿
        const result = replaceAll(fileContent, s1, s2);
        
        // DÃ²ng 17: Äáº¿m sá»‘ láº§n xuáº¥t hiá»‡n cá»§a s1
        // CÃ¡ch Ä‘áº¿m: split theo s1 sáº½ táº¡o ra (n+1) pháº§n, vá»›i n lÃ  sá»‘ láº§n xuáº¥t hiá»‡n
        const count = (fileContent.split(s1).length - 1);
        
        // DÃ²ng 19: In sá»‘ láº§n thay tháº¿
        console.log(`ÄÃ£ thay tháº¿ ${count} láº§n\n`);
        
        // DÃ²ng 20: Gá»­i káº¿t quáº£ vá» client dáº¡ng JSON
        socket.write(JSON.stringify({ result, count }));
    });
});

// DÃ²ng 24: Láº¯ng nghe trÃªn cá»•ng 5002
server.listen(5002, () => {
    console.log('Server cháº¡y táº¡i cá»•ng 5002\n');
});
```

---

## BÃ i 4: Xá»­ lÃ½ chuá»—i

### ğŸ“ File: `4_tcp_server.js`

```javascript
// DÃ²ng 1: Import module net
const net = require('net');

// DÃ²ng 3-23: HÃ m xá»­ lÃ½ cÃ¡c lá»‡nh khÃ¡c nhau
// Tham sá»‘: cmd = tÃªn lá»‡nh, text = chuá»—i cáº§n xá»­ lÃ½, ...params = cÃ¡c tham sá»‘ thÃªm
function processCommand(cmd, text, ...params) {
    // DÃ²ng 4: Switch-case kiá»ƒm tra lá»‡nh
    switch(cmd) {
        // DÃ²ng 5-6: Lá»‡nh UPPER - chuyá»ƒn thÃ nh chá»¯ HOA
        case 'UPPER':
            return text.toUpperCase();
        
        // DÃ²ng 7-8: Lá»‡nh LOWER - chuyá»ƒn thÃ nh chá»¯ thÆ°á»ng
        case 'LOWER':
            return text.toLowerCase();
        
        // DÃ²ng 9-12: Lá»‡nh DELETE - xÃ³a 1 Ä‘oáº¡n chuá»—i
        case 'DELETE':
            // DÃ²ng 11: Láº¥y vá»‹ trÃ­ báº¯t Ä‘áº§u vÃ  káº¿t thÃºc tá»« params
            const [start, end] = params.map(Number);
            // DÃ²ng 12: Cáº¯t 2 Ä‘oáº¡n vÃ  ná»‘i láº¡i
            // VÃ­ dá»¥: "hello world" vá»›i start=0, end=5 â†’ "" + " world" = " world"
            return text.slice(0, start) + text.slice(end);
        
        // DÃ²ng 13-17: Lá»‡nh INSERT - chÃ¨n chuá»—i con
        case 'INSERT':
            // DÃ²ng 15-16: Láº¥y vá»‹ trÃ­ vÃ  chuá»—i con cáº§n chÃ¨n
            const pos = Number(params[0]);
            const substr = params[1];
            // DÃ²ng 17: Cáº¯t lÃ m 2 Ä‘oáº¡n, chÃ¨n substr vÃ o giá»¯a
            // VÃ­ dá»¥: "hello" vá»›i pos=5, substr=" world" â†’ "hello" + " world" + "" = "hello world"
            return text.slice(0, pos) + substr + text.slice(pos);
        
        // DÃ²ng 18-19: Lá»‡nh khÃ´ng há»£p lá»‡
        default:
            return 'Lá»‡nh khÃ´ng há»£p lá»‡';
    }
}

// DÃ²ng 22: Táº¡o TCP server
const server = net.createServer((socket) => {
    // DÃ²ng 23: In thÃ´ng bÃ¡o
    console.log('Client káº¿t ná»‘i!\n');
    
    // DÃ²ng 25: Láº¯ng nghe dá»¯ liá»‡u tá»« client
    socket.on('data', (data) => {
        // DÃ²ng 26-27: Parse dá»¯ liá»‡u
        // Format: "UPPER|hello world" â†’ ["UPPER", "hello world"]
        const parts = data.toString().split('|');
        // Destructuring: pháº§n tá»­ Ä‘áº§u lÃ  cmd, thá»© 2 lÃ  text, cÃ²n láº¡i lÃ  params
        const [cmd, text, ...params] = parts;
        
        // DÃ²ng 29-31: In thÃ´ng tin nháº­n Ä‘Æ°á»£c
        console.log(`Lá»‡nh: ${cmd}`);
        console.log(`Text: ${text}`);
        console.log(`Params: ${params.join(', ')}`);
        
        // DÃ²ng 33: Gá»i hÃ m xá»­ lÃ½ lá»‡nh
        const result = processCommand(cmd, text, ...params);
        // DÃ²ng 34: In káº¿t quáº£
        console.log(`â†’ ${result}\n`);
        
        // DÃ²ng 36: Gá»­i káº¿t quáº£ vá» client
        socket.write(result);
    });
});

// DÃ²ng 40-42: Láº¯ng nghe trÃªn cá»•ng 5003
server.listen(5003, () => {
    console.log('Server cháº¡y cá»•ng 5003');
    console.log('Lá»‡nh: UPPER, LOWER, DELETE, INSERT\n');
});
```

---

## BÃ i 5: Chat room

### ğŸ“ File: `5_tcp_server.js`

```javascript
// DÃ²ng 1-2: Import module
const net = require('net');
const readline = require('readline');

// DÃ²ng 4: Máº£ng lÆ°u táº¥t cáº£ client Ä‘ang káº¿t ná»‘i
const clients = [];

// DÃ²ng 5: Táº¡o TCP server
const server = net.createServer((socket) => {
    
    // DÃ²ng 7: Gá»­i yÃªu cáº§u nháº­p tÃªn cho client má»›i
    socket.write('Nháº­p tÃªn cá»§a báº¡n: ');
    
    // DÃ²ng 8-9: Biáº¿n lÆ°u tráº¡ng thÃ¡i
    let username = '';     // TÃªn ngÆ°á»i dÃ¹ng
    let isNamed = false;   // ÄÃ£ nháº­p tÃªn chÆ°a
    
    // DÃ²ng 11: Láº¯ng nghe dá»¯ liá»‡u tá»« client
    socket.on('data', (data) => {
        // DÃ²ng 12: Láº¥y message vÃ  xÃ³a khoáº£ng tráº¯ng
        const msg = data.toString().trim();
        
        // DÃ²ng 14-23: Náº¿u chÆ°a nháº­p tÃªn
        if (!isNamed) {
            // DÃ²ng 15: LÆ°u tÃªn
            username = msg;
            
            // DÃ²ng 16: ThÃªm client vÃ o danh sÃ¡ch
            clients.push({ socket, username });
            
            // DÃ²ng 17: In thÃ´ng bÃ¡o server
            console.log(`[+] ${username} tham gia (${clients.length} online)\n`);
            
            // DÃ²ng 19: ThÃ´ng bÃ¡o cho táº¥t cáº£ client khÃ¡c
            broadcast(`[SERVER] ${username} Ä‘Ã£ tham gia chat!`, socket);
            
            // DÃ²ng 20: Gá»­i lá»i chÃ o cho client vá»«a vÃ o
            socket.write(`ChÃ o ${username}! GÃµ tin nháº¯n Ä‘á»ƒ chat.\n\n`);
            
            // DÃ²ng 21-22: ÄÃ¡nh dáº¥u Ä‘Ã£ nháº­p tÃªn, thoÃ¡t khá»i hÃ m
            isNamed = true;
            return;
        }
        
        // DÃ²ng 25-26: Náº¿u Ä‘Ã£ nháº­p tÃªn â†’ xá»­ lÃ½ tin nháº¯n chat
        // Format tin nháº¯n: "[username]: message"
        const message = `[${username}]: ${msg}`;
        
        // DÃ²ng 27: In tin nháº¯n ra server console
        console.log(message);
        
        // DÃ²ng 28: Gá»­i tin nháº¯n cho táº¥t cáº£ client (trá»« ngÆ°á»i gá»­i)
        broadcast(message, socket);
        
        // DÃ²ng 30-31: XÃ¡c nháº­n Ä‘Ã£ gá»­i cho ngÆ°á»i gá»­i
        socket.write('âœ“ ÄÃ£ gá»­i\n');
    });
    
    // DÃ²ng 34-41: Xá»­ lÃ½ khi client ngáº¯t káº¿t ná»‘i
    socket.on('close', () => {
        // DÃ²ng 35-36: TÃ¬m vá»‹ trÃ­ cá»§a client trong máº£ng
        const index = clients.findIndex(c => c.socket === socket);
        
        // DÃ²ng 37: Náº¿u tÃ¬m tháº¥y
        if (index !== -1) {
            // DÃ²ng 38: XÃ³a khá»i máº£ng (1 pháº§n tá»­ táº¡i vá»‹ trÃ­ index)
            clients.splice(index, 1);
            
            // DÃ²ng 39: In thÃ´ng bÃ¡o server
            console.log(`[-] ${username} rá»i khá»i (${clients.length} online)\n`);
            
            // DÃ²ng 40: ThÃ´ng bÃ¡o cho táº¥t cáº£ client cÃ²n láº¡i
            broadcast(`[SERVER] ${username} Ä‘Ã£ rá»i khá»i!`);
        }
    });
});

// DÃ²ng 44-50: HÃ m broadcast - gá»­i tin nháº¯n cho táº¥t cáº£ client
// Tham sá»‘: message = ná»™i dung, exclude = socket cáº§n loáº¡i trá»« (khÃ´ng gá»­i)
function broadcast(message, exclude = null) {
    // DÃ²ng 45: Duyá»‡t qua táº¥t cáº£ client
    clients.forEach(client => {
        // DÃ²ng 46-48: Náº¿u khÃ´ng pháº£i client cáº§n loáº¡i trá»«
        if (client.socket !== exclude) {
            // Gá»­i tin nháº¯n
            client.socket.write(message + '\n');
        }
    });
}

// DÃ²ng 52-57: Láº¯ng nghe trÃªn cá»•ng 5004
server.listen(5004, () => {
    console.log('='.repeat(40));
    console.log('  CHAT ROOM SERVER - TCP');
    console.log('  Port: 5004');
    console.log('='.repeat(40) + '\n');
});
```

---
## ğŸŒ Kiáº¿n thá»©c ná»n táº£ng

### ğŸ“¡ TCP (Transmission Control Protocol)

**Äáº·c Ä‘iá»ƒm:**
- **Connection-oriented**: Pháº£i thiáº¿t láº­p káº¿t ná»‘i trÆ°á»›c (3-way handshake)
- **Reliable**: Äáº£m báº£o dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch Ä‘áº§y Ä‘á»§, Ä‘Ãºng thá»© tá»±
- **Flow control**: Kiá»ƒm soÃ¡t tá»‘c Ä‘á»™ gá»­i/nháº­n Ä‘á»ƒ khÃ´ng bá»‹ trÃ n
- **Error checking**: Tá»± Ä‘á»™ng phÃ¡t hiá»‡n lá»—i vÃ  gá»­i láº¡i gÃ³i tin bá»‹ máº¥t
- **Overhead**: Tá»‘n tÃ i nguyÃªn hÆ¡n (header 20-60 bytes)

**CÆ¡ cháº¿ 3-way handshake:**
```
Client                    Server
  â”‚                         â”‚
  â”‚â”€â”€â”€â”€â”€â”€ SYN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  (Xin káº¿t ná»‘i)
  â”‚                         â”‚
  â”‚<â”€â”€â”€â”€â”€ SYN-ACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  (Äá»“ng Ã½ + xÃ¡c nháº­n)
  â”‚                         â”‚
  â”‚â”€â”€â”€â”€â”€â”€ ACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  (XÃ¡c nháº­n hoÃ n táº¥t)
  â”‚                         â”‚
  â””â”€â”€â”€ Káº¿t ná»‘i thÃ nh cÃ´ng â”€â”€â”˜
```

**Trong code cá»§a báº¡n:**
```javascript
// TCP Server - net.createServer()
const server = net.createServer((socket) => {
    // socket Ä‘áº¡i diá»‡n cho 1 káº¿t ná»‘i cá»‘ Ä‘á»‹nh
    socket.on('data', (data) => {
        // Nháº­n dá»¯ liá»‡u tá»« chÃ­nh káº¿t ná»‘i Ä‘Ã³
        socket.write(result);  // Gá»­i láº¡i cho chÃ­nh client Ä‘Ã³
    });
});

// TCP Client - client.connect()
client.connect(5000, '127.0.0.1', () => {
    // Pháº£i káº¿t ná»‘i trÆ°á»›c má»›i gá»­i Ä‘Æ°á»£c
    client.write('Hello');  // Gá»­i qua káº¿t ná»‘i Ä‘Ã£ thiáº¿t láº­p
});
```

### ğŸ“¡ UDP (User Datagram Protocol)

**Äáº·c Ä‘iá»ƒm:**
- **Connectionless**: KhÃ´ng cáº§n thiáº¿t láº­p káº¿t ná»‘i, gá»­i trá»±c tiáº¿p
- **Unreliable**: KhÃ´ng Ä‘áº£m báº£o dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch (cÃ³ thá»ƒ máº¥t gÃ³i tin)
- **No ordering**: GÃ³i tin cÃ³ thá»ƒ Ä‘áº¿n khÃ´ng Ä‘Ãºng thá»© tá»± gá»­i
- **Fast**: Nhanh hÆ¡n TCP (khÃ´ng cÃ³ overhead káº¿t ná»‘i)
- **Overhead**: Nháº¹ hÆ¡n (header chá»‰ 8 bytes)

**CÆ¡ cháº¿ gá»­i nháº­n:**
```
Client                    Server
  â”‚                         â”‚
  â”‚â”€â”€â”€â”€ Data packet 1 â”€â”€â”€â”€â”€>â”‚  (cÃ³ thá»ƒ Ä‘áº¿n)
  â”‚â”€â”€â”€â”€ Data packet 2 â”€â”€â”€â”€â”€>â”‚  (cÃ³ thá»ƒ máº¥t)
  â”‚â”€â”€â”€â”€ Data packet 3 â”€â”€â”€â”€â”€>â”‚  (cÃ³ thá»ƒ Ä‘áº¿n trÆ°á»›c packet 1)
  â”‚                         â”‚
  â””â”€â”€â”€ KhÃ´ng cÃ³ xÃ¡c nháº­n â”€â”€â”€â”€â”˜
```

**Trong code cá»§a báº¡n:**
```javascript
// UDP Server - dgram.createSocket()
const server = dgram.createSocket('udp4');
server.on('message', (msg, rinfo) => {
    // rinfo chá»©a thÃ´ng tin client (address, port)
    // Pháº£i chá»‰ Ä‘á»‹nh rÃµ gá»­i cho ai
    server.send(result, rinfo.port, rinfo.address);
});

// UDP Client - gá»­i trá»±c tiáº¿p
const client = dgram.createSocket('udp4');
const msg = Buffer.from('Hello');
// KhÃ´ng cáº§n connect, gá»­i luÃ´n
client.send(msg, 5000, '127.0.0.1');
```

---

### ğŸ“Š So sÃ¡nh TCP vs UDP

| TiÃªu chÃ­ | TCP | UDP |
|----------|-----|-----|
| **Káº¿t ná»‘i** | Cáº§n thiáº¿t láº­p trÆ°á»›c | KhÃ´ng cáº§n |
| **Äá»™ tin cáº­y** | 100% Ä‘áº£m báº£o Ä‘áº¿n Ä‘Ã­ch | KhÃ´ng Ä‘áº£m báº£o |
| **Thá»© tá»±** | ÄÃºng thá»© tá»± gá»­i | CÃ³ thá»ƒ sai thá»© tá»± |
| **Tá»‘c Ä‘á»™** | Cháº­m hÆ¡n | Nhanh hÆ¡n |
| **TÃ i nguyÃªn** | Tá»‘n nhiá»u | Ãt |
| **PhÃ¡t hiá»‡n lá»—i** | CÃ³, tá»± Ä‘á»™ng gá»­i láº¡i | KhÃ´ng |
| **Module Node.js** | `net` | `dgram` |
| **Táº¡o server** | `net.createServer()` | `dgram.createSocket()` |
| **Gá»­i dá»¯ liá»‡u** | `socket.write(data)` | `socket.send(msg, port, address)` |
| **Nháº­n dá»¯ liá»‡u** | `socket.on('data')` | `socket.on('message')` |
| **Biáº¿t client** | Tá»± Ä‘á»™ng (qua socket) | Pháº£i láº¥y tá»« `rinfo` |

**Code trong bÃ i cá»§a báº¡n:**
```javascript
// TCP - Gá»­i vÃ  nháº­n Ä‘Æ¡n giáº£n
socket.write('Hello');           // Tá»± biáº¿t gá»­i cho ai
socket.on('data', (data) => {}); // Tá»± biáº¿t nháº­n tá»« ai

// UDP - Pháº£i chá»‰ rÃµ
socket.send(msg, 5000, '127.0.0.1');              // Pháº£i chá»‰ Ä‘á»‹nh port, address
socket.on('message', (msg, rinfo) => {            // rinfo chá»©a thÃ´ng tin ngÆ°á»i gá»­i
    console.log(`Tá»« ${rinfo.address}:${rinfo.port}`);
});
```

---

### ğŸ¯ Khi nÃ o dÃ¹ng TCP?

**DÃ¹ng TCP khi:**
- âœ… **Cáº§n Ä‘áº£m báº£o dá»¯ liá»‡u Ä‘áº¿n Ä‘Ã­ch Ä‘áº§y Ä‘á»§**
- âœ… **Thá»© tá»± tin nháº¯n quan trá»ng**
- âœ… **Cháº¥p nháº­n cháº­m hÆ¡n má»™t chÃºt Ä‘á»ƒ Ä‘á»•i láº¥y Ä‘á»™ tin cáº­y**

**VÃ­ dá»¥ thá»±c táº¿ tá»« bÃ i cá»§a báº¡n:**

**BÃ i 1 - Giáº£i phÆ°Æ¡ng trÃ¬nh:** DÃ¹ng TCP
- LÃ½ do: Pháº£i Ä‘áº£m báº£o káº¿t quáº£ Ä‘Ãºng 100% gá»­i vá» client
- Náº¿u máº¥t káº¿t quáº£ â†’ user khÃ´ng biáº¿t nghiá»‡m cá»§a phÆ°Æ¡ng trÃ¬nh

**BÃ i 2 - NhÃ¢n ma tráº­n:** DÃ¹ng TCP
- LÃ½ do: Ma tráº­n cÃ³ nhiá»u sá»‘, máº¥t 1 sá»‘ â†’ káº¿t quáº£ sai hoÃ n toÃ n
- Cáº§n Ä‘áº£m báº£o toÃ n bá»™ ma tráº­n gá»­i Ä‘á»§

**BÃ i 3 - Thay tháº¿ file:** DÃ¹ng TCP
- LÃ½ do: File text pháº£i Ä‘áº§y Ä‘á»§, máº¥t 1 dÃ²ng â†’ file bá»‹ há»ng
- Cáº§n Ä‘áº£m báº£o ná»™i dung file nguyÃªn váº¹n

**BÃ i 4 - Xá»­ lÃ½ chuá»—i:** DÃ¹ng TCP
- LÃ½ do: Lá»‡nh vÃ  tham sá»‘ pháº£i Ä‘áº§y Ä‘á»§
- Náº¿u máº¥t tham sá»‘ â†’ server xá»­ lÃ½ sai

**BÃ i 5 - Chat room:** DÃ¹ng TCP
- LÃ½ do: Tin nháº¯n pháº£i Ä‘áº¿n Ä‘áº§y Ä‘á»§, Ä‘Ãºng thá»© tá»±
- Náº¿u máº¥t tin â†’ cuá»™c trÃ² chuyá»‡n khÃ´ng hiá»ƒu Ä‘Æ°á»£c

**CÃ¡c á»©ng dá»¥ng khÃ¡c dÃ¹ng TCP:**
- ğŸŒ Web browsing (HTTP/HTTPS)
- ğŸ“§ Email (SMTP, POP3, IMAP)
- ğŸ“ File transfer (FTP, SFTP)
- ğŸ” Remote access (SSH, Telnet)
- ğŸ’¾ Database connections

---

### ğŸ¯ Khi nÃ o dÃ¹ng UDP?

**DÃ¹ng UDP khi:**
- âœ… **Tá»‘c Ä‘á»™ quan trá»ng hÆ¡n Ä‘á»™ tin cáº­y**
- âœ… **Cháº¥p nháº­n máº¥t má»™t Ã­t dá»¯ liá»‡u**
- âœ… **Dá»¯ liá»‡u gá»­i thÆ°á»ng xuyÃªn, liÃªn tá»¥c**
- âœ… **Äá»™ trá»… (latency) pháº£i tháº¥p**

**VÃ­ dá»¥ thá»±c táº¿:**

**Video call (Zoom, Skype):**
- Máº¥t vÃ i frame video â†’ khÃ´ng sao, váº«n xem Ä‘Æ°á»£c
- Quan trá»ng lÃ  real-time, khÃ´ng bá»‹ giáº­t lag
- TCP cháº­m â†’ bá»‹ delay, khÃ´ng real-time

**Game online (PUBG, LOL, Valorant):**
- Vá»‹ trÃ­ nhÃ¢n váº­t cáº­p nháº­t liÃªn tá»¥c (60 láº§n/giÃ¢y)
- Máº¥t 1-2 gÃ³i tin â†’ khÃ´ng áº£nh hÆ°á»Ÿng lá»›n (gÃ³i tin tiáº¿p theo Ä‘Ã£ cáº­p nháº­t vá»‹ trÃ­ má»›i)
- TCP cháº­m â†’ bá»‹ lag, cháº¿t máº¥t

**Live streaming (YouTube Live, Twitch):**
- Stream video/audio liÃªn tá»¥c
- Máº¥t vÃ i khung hÃ¬nh â†’ ngÆ°á»i xem khÃ´ng nháº­n ra
- Quan trá»ng lÃ  mÆ°á»£t, khÃ´ng Ä‘á»©ng hÃ¬nh

**VoIP (gá»i Ä‘iá»‡n thoáº¡i qua máº¡ng):**
- Giá»ng nÃ³i real-time
- Máº¥t vÃ i mili giÃ¢y â†’ khÃ´ng áº£nh hÆ°á»Ÿng
- TCP cháº­m â†’ thoáº¡i bá»‹ delay, nÃ³i khÃ´ng ká»‹p

**DNS lookup:**
- Chá»‰ cáº§n há»i 1 láº§n: "google.com IP lÃ  gÃ¬?"
- Náº¿u khÃ´ng Ä‘Æ°á»£c â†’ há»i láº¡i, Ä‘Æ¡n giáº£n
- KhÃ´ng cáº§n thiáº¿t láº­p káº¿t ná»‘i phá»©c táº¡p nhÆ° TCP

**Sensor data (IoT):**
- Cáº£m biáº¿n gá»­i nhiá»‡t Ä‘á»™ má»—i giÃ¢y: 25Â°C, 25Â°C, 26Â°C...
- Máº¥t 1 giÃ¡ trá»‹ â†’ khÃ´ng sao, giÃ¡ trá»‹ tiáº¿p theo Ä‘Ã£ Ä‘áº¿n
- Quan trá»ng lÃ  nhanh, tá»‘n Ã­t pin

---

### ğŸ”‘ CÃ¡c khÃ¡i niá»‡m JavaScript trong code

**1. Callback Function**
```javascript
// HÃ m Ä‘Æ°á»£c truyá»n nhÆ° tham sá»‘, sáº½ Ä‘Æ°á»£c gá»i sau
function input(name, cb) {
    rl.question('Nháº­p: ', (answer) => {
        cb(answer);  // Gá»i callback vá»›i káº¿t quáº£
    });
}
```

**2. Arrow Function**
```javascript
// CÃº phÃ¡p ngáº¯n gá»n
(param) => { return value }

// TÆ°Æ¡ng Ä‘Æ°Æ¡ng:
function(param) { return value }
```

**3. Destructuring**
```javascript
const {m1, m2} = data;  // Tá»« object
const [a, b, c] = nums; // Tá»« array
```

**4. Spread Operator:** `...params` - láº¥y táº¥t cáº£ tham sá»‘ cÃ²n láº¡i

**5. JSON:** Chuyá»ƒn Ä‘á»•i object â†” string
```javascript
JSON.stringify(obj)  // Object â†’ String
JSON.parse(str)      // String â†’ Object
```

**6. Buffer:** Dá»¯ liá»‡u nhá»‹ phÃ¢n
```javascript
data.toString()      // Buffer â†’ String
Buffer.from('hello') // String â†’ Buffer
```

---
## ï¿½ CÃ¡ch cháº¡y

```bash
# TCP - LuÃ´n cháº¡y server trÆ°á»›c
node 1_tcp_server.js  # Terminal 1
node 1_tcp_client.js  # Terminal 2

# UDP (tÆ°Æ¡ng tá»±)
node 1_udp_server.js
node 1_udp_client.js
```

---

## ğŸ“ CÃ¡ch cháº¡y

```bash
# TCP - LuÃ´n cháº¡y server trÆ°á»›c
node 1_tcp_server.js  # Terminal 1
node 1_tcp_client.js  # Terminal 2

# UDP (tÆ°Æ¡ng tá»±)
node 1_udp_server.js
node 1_udp_client.js
```
